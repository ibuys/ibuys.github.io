<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>jb… | Adopting BBEdit Scripts for Vim</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta property="og:title" content="Adopting BBEdit Scripts for Vim">
  <meta property="og:type" content="website">
  <meta property="og:url" content="http://localhost:4000/Adopting_BBEdit_Scripts_in_Vim/">
  <meta property="og:description" content="">
  <meta property="og:site_name" content="jb…">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:url" content="http://localhost:4000/Adopting_BBEdit_Scripts_in_Vim/">
  <meta name="twitter:title" content="Adopting BBEdit Scripts for Vim">
  <meta name="twitter:description" content="">

  
    <meta property="og:image" content="http://localhost:4000/assets/og-image-ee46bbc61b334e821e81534b1fd43f3fee6f020ec174b3c2114445695fd48c01.jpg">
    <meta name="twitter:image" content="http://localhost:4000/assets/og-image-ee46bbc61b334e821e81534b1fd43f3fee6f020ec174b3c2114445695fd48c01.jpg">
  

  <link href="http://localhost:4000/atom.xml" type="application/rss+xml" rel="alternate" title="jb… Last 10 blog posts" />

  

  

    
      <link rel="icon" type="image/x-icon" href="/assets/favicon-light-212606391baaa7b16463b92b3c519b56832ab53456441e045807984cad648a1e.ico">
      <link rel="apple-touch-icon" href="/assets/apple-touch-icon-light-87d1f2a3a19b1500e5c1626a0492025ca5f7f97d24540dc5900288e92112925a.png">
      <link rel="stylesheet" type="text/css" title="light" id="light" href="/assets/light-7f522908aad16b87e703f470834aceb4a7ff176aa3d0ea38bc79efa11ac38c6d.css">
      <link rel="stylesheet" type="text/css" title="dark" id="dark" href="/assets/dark-02e2f267b21f6c4c71f528ac48c0e6b6680d4c968ac2a5fa52e4f416874e52a4.css" disabled="true">
    

  
  
</head>

<body>
  <main>
    <div class="grid grid-centered">
      <div class="grid-cell">
        <nav class="header-nav ">
  <a href="/" class="header-logo" title="jb…">jb…</a>
  <ul class="header-links">
    
      <li>
        <a href="/about" title="About me">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-about">
  <use href="/assets/about-ecf154b571ab8034ae00aeed91a3b7ad68db80b46d958753ad6216c919486e88.svg#icon-about" xlink:href="/assets/about-ecf154b571ab8034ae00aeed91a3b7ad68db80b46d958753ad6216c919486e88.svg#icon-about"></use>
</svg>

        </a>
      </li>
    
    
      <li>
        <a href="/microblog/" title="Chirp, chirp">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-twitter">
  <use href="/assets/twitter-8842c33965263ad1b03a978406826677a668f94125d5837e70ab83f24b3213a7.svg#icon-twitter" xlink:href="/assets/twitter-8842c33965263ad1b03a978406826677a668f94125d5837e70ab83f24b3213a7.svg#icon-twitter"></use>
</svg>

        </a>
      </li>
    
    
    
    
      <li>
        <a href="https://github.com/ibuys" rel="noreferrer noopener" target="_blank" title="GitHub">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-github">
  <use href="/assets/github-094f81040819f34343ee6ffff0980f17e2807b08b595eaaf66ae3554934fd78d.svg#icon-github" xlink:href="/assets/github-094f81040819f34343ee6ffff0980f17e2807b08b595eaaf66ae3554934fd78d.svg#icon-github"></use>
</svg>

        </a>
      </li>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
      <li>
        <a href="/atom.xml" rel="noreferrer noopener" target="_blank" title="RSS">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-rss">
  <use href="/assets/rss-541ec5cea9cefd10d2fcfec01888f3f231a8829940249835fa7b7b3a12ae0d0d.svg#icon-rss" xlink:href="/assets/rss-541ec5cea9cefd10d2fcfec01888f3f231a8829940249835fa7b7b3a12ae0d0d.svg#icon-rss"></use>
</svg>

        </a>
      </li>
    
    
      <li>
        <a onclick="toggle()" title="Toggle Theme">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-theme">
  <use href="/assets/theme-66869e0bf8dab34bae1c86bda400327b772e0be69e8dc28d3ede896e771320ed.svg#icon-theme" xlink:href="/assets/theme-66869e0bf8dab34bae1c86bda400327b772e0be69e8dc28d3ede896e771320ed.svg#icon-theme"></use>
</svg>

        </a>
      </li>
    
  </ul>
</nav>

        <article class="article ">
          <header class="article-header">
            <h1>Adopting BBEdit Scripts for Vim</h1>
            <p></p>
            <div class="article-list-footer">
              <span class="article-list-date">
                January 4, 2015
              </span>
              <span class="article-list-divider">-</span>
              <span class="article-list-minutes">
                
                
                  3 minute read
                
              </span>
              <span class="article-list-divider">-</span>
              <div class="article-list-tags">
                
                  <a href="/tag/vim">vim</a>
                
                  <a href="/tag/BBedit">BBedit</a>
                
                  <a href="/tag/drdrang">drdrang</a>
                
              </div>
            </div>
          </header>

          <div class="article-content">
            <p>In addition to my experiments with the design of this site, I was also testing out BBEdit as my main writing and programming tool. BBEdit didn’t stick, but I did like some of the scripting the good <a href="http://www.leancrew.com/all-this/2012/11/markdown-table-scripts-for-bbedit/">Dr. Drang</a> has done, and wanted to adopt a few for MacVim. I started with three of his scripts today, one to paste and select text in one command, one to convert a tab-separated table to Markdown, and another to even up the Markdown table so it’s easier to read in plain text.</p>

<p>Since Dr. Drang’s scripts read from stdin and output to stdout<sup id="fnref:fn1"><a href="#fn:fn1" class="footnote">1</a></sup>, converting them to Vim was very easy, once I found the right syntax for my vimrc file<sup id="fnref:fn2"><a href="#fn:fn2" class="footnote">2</a></sup>. My first thought was that I would be able to copy the same syntax I use for calling the outstanding <a href="http://drbunsen.github.io/formd/">formd by Seth Brown</a>, but formd is meant to parse the entire text of the file, not just the selection. Eventually, I found my answer on <a href="http://stackoverflow.com/questions/2575545/vim-pipe-selected-text-to-shell-cmd-and-receive-output-on-vim-info-command-line">StackOverflow</a>.</p>

<p>My vimrc file now has the following lines:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>" Even up a markdown table
vmap &lt;leader&gt;mn &lt;esc&gt;:'&lt;,'&gt;!~/Unix/bin/Normalize-Tables.py&lt;CR&gt;

" Convert a tab separated tabel to a markdown table
vmap &lt;leader&gt;mt &lt;esc&gt;:'&lt;,'&gt;!~/Unix/bin/Tabs-to-Markdown-Tables.pl&lt;CR&gt;
</code></pre></div></div>

<p>The first word, <code class="highlighter-rouge">vmap</code>, maps the shortcut to visual selections in Vim. Next, <code class="highlighter-rouge">&lt;leader&gt;mn</code> creates the shortcuts <code class="highlighter-rouge">,mn</code> for <em>Normalize-Tables.py</em> and <code class="highlighter-rouge">,mt</code> for <em>Tabs-to-Markdown-Tables.pl</em>.</p>

<p>The next part <code class="highlighter-rouge">&lt;esc&gt;:'&lt;,'&gt;</code> grabs the selection and passes it to the command, which starts with an exclamation point<sup id="fnref:fn3"><a href="#fn:fn3" class="footnote">3</a></sup> and ends with <code class="highlighter-rouge">&lt;CR&gt;</code>, which stands for “Carriage Return”.</p>

<p>I need to spend some time in my vimrc file to sort out the naming convention for all the key maps, but for now, I’m thinking “,mn” for “markdown normalize”, and “,mt” for “markdown from tabs”.</p>

<p>For the third part I’m borrowing from Dr. Drang, I wanted to paste and select text at the same time. Once again I had to turn to <a href="http://stackoverflow.com/questions/4312664/is-there-a-vim-command-to-select-pasted-text?rq=1">StackOverflow</a>, and now have this mapped in vimrc:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nnoremap &lt;leader&gt;sp :set paste&lt;CR&gt;:put  *&lt;CR&gt;:set nopaste&lt;CR&gt; &lt;Bar&gt; `[v`]
</code></pre></div></div>

<p>The first part sets the mapping, <code class="highlighter-rouge">,sp</code>, which I’m thinking of as “select paste”, and then pastes the text from the OS X system clipboard. Next, the <code class="highlighter-rouge">&lt;Bar&gt;</code> entry strings two mappings together in Vim. Finally, <code class="highlighter-rouge">\</code>[v`]` performs the selection on the last change to the text.</p>

<p>So, now I can take text from Excel like this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Left align	Center align	Right align
This	This	This
column	column	column
will	will	will
be	be	be
left	center	right
aligned	aligned	aligned
</code></pre></div></div>

<p>paste and select it with <code class="highlighter-rouge">,sp</code>, followed by <code class="highlighter-rouge">,mt</code> to convert the table to Markdown.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>|Left align|Center align|Right align|
|--|--|--|
|This|This|This|
|column|column|column|
|will|will|will|
|be|be|be|
|left|center|right
|aligned|aligned|aligned|
</code></pre></div></div>

<p>and finally <code class="highlighter-rouge">,mn</code> to even the table up nicely:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>| Left align | Center align | Right align |
|:-----------|:------------|:-------------|
| This       | This        | This         |
| column     | column      | column       |
| will       | will        | will         |
| be         | be          | be           |
| left       | center	   | right        |
| aligned    | aligned     | aligned      |
</code></pre></div></div>

<p>As always, my thanks to the good Doctor for scripts and inspiration.</p>

<div class="footnotes">
  <ol>
    <li id="fn:fn1">
      <p>As God intended. <a href="#fnref:fn1" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:fn2">
      <p>Someday, someone will create the perfect app for managing your vimrc file, but today is not that day. <a href="#fnref:fn2" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:fn3">
      <p>Or a bang, if you’re an old Unix guy. <a href="#fnref:fn3" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>

          </div>
          <div class="article-share">
            
            
            <a href="https://twitter.com/home?status=Adopting+BBEdit+Scripts+for+Vim%20-%20http://localhost:4000/Adopting_BBEdit_Scripts_in_Vim/%20by%20@ibuys" title="Share on Twitter" rel="noreferrer noopener" target="_blank">
              <svg viewBox="0 0 512 512"><path d="M492 109.5c-17.4 7.7-36 12.9-55.6 15.3 20-12 35.4-31 42.6-53.6 -18.7 11.1-39.4 19.2-61.5 23.5C399.8 75.8 374.6 64 346.8 64c-53.5 0-96.8 43.4-96.8 96.9 0 7.6 0.8 15 2.5 22.1 -80.5-4-151.9-42.6-199.6-101.3 -8.3 14.3-13.1 31-13.1 48.7 0 33.6 17.2 63.3 43.2 80.7C67 210.7 52 206.3 39 199c0 0.4 0 0.8 0 1.2 0 47 33.4 86.1 77.7 95 -8.1 2.2-16.7 3.4-25.5 3.4 -6.2 0-12.3-0.6-18.2-1.8 12.3 38.5 48.1 66.5 90.5 67.3 -33.1 26-74.9 41.5-120.3 41.5 -7.8 0-15.5-0.5-23.1-1.4C62.8 432 113.7 448 168.3 448 346.6 448 444 300.3 444 172.2c0-4.2-0.1-8.4-0.3-12.5C462.6 146 479 129 492 109.5z"/></svg>
            </a>
            <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/Adopting_BBEdit_Scripts_in_Vim/" title="Share on Facebook" rel="noreferrer noopener" target="_blank">
              <svg viewBox="0 0 512 512"><path d="M288 192v-38.1c0-17.2 3.8-25.9 30.5-25.9H352V64h-55.9c-68.5 0-91.1 31.4-91.1 85.3V192h-45v64h45v192h83V256h56.4l7.6-64H288z"/></svg>
            </a>
            <a href="https://plus.google.com/share?url=http://localhost:4000/Adopting_BBEdit_Scripts_in_Vim/" title="Share on Google+" rel="noreferrer noopener" target="_blank">
              <svg viewBox="0 0 128 128"><path d="M40.7 55.9v16.1c0 0 15.6 0 22 0C59.2 82.5 53.8 88.2 40.7 88.2c-13.3 0-23.7-10.8-23.7-24.2s10.4-24.2 23.7-24.2c7.1 0 11.6 2.5 15.8 5.9 3.3-3.3 3.1-3.8 11.6-11.9 -7.2-6.6-16.8-10.6-27.4-10.6C18.2 23.3 0 41.5 0 64c0 22.5 18.2 40.7 40.7 40.7 33.6 0 41.8-29.3 39-48.8H40.7zM113.9 56.7V42.6h-10.1v14.1H89.4v10.1h14.5v14.5h10.1V66.8H128V56.7H113.9z"/></svg>
            </a>
          </div>

          
        </article>
        <footer class="footer ">
  <p>
Copyright © 2007-2019 Jonathan Buys
  </p>
  <p>
  ISSN: 2161-8119
  </p>
</footer>

      </div>
    </div>
  </main>
  <script src="/assets/vendor-0fb4b91f7ad6c193a69224eba7a01b691a2d7528ee672607575ccc0df3aea545.js" type="text/javascript"></script>


  <script src="/assets/webfonts-96493456d319d1bf419afdf8701552d4d486fee6afd304897d4fd81eb4e0cc0b.js" type="text/javascript"></script>




<script src="/assets/application-cfde13ac81ddaf4351b2e739603e2baf688d0fcc9aba613fe62bbb1c7b037fb9.js" type="text/javascript"></script>


  <script src="/assets/themetoggle-df0d3d73164dc26dffbd630182ae4d0dfa7bee6b694a2b5d565d73595b582bbf.js" type="text/javascript"></script>

</body>
</html>
